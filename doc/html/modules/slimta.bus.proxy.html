<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>slimta.bus.proxy: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
    <!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
    <div id="product_logo"></div>
    <div id="product_name"><big><b></b></big></div>
    <div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/slimta.html">slimta</a>
	</li>

	<li>
		<a href="../modules/slimta.base64.html">slimta.base64</a>
	</li>

	<li>
		<a href="../modules/slimta.bus.html">slimta.bus</a>
	</li>

	<li><strong>slimta.bus.proxy</strong></li>
	
	<li>
		<a href="../modules/slimta.edge.http.html">slimta.edge.http</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.smtp.html">slimta.edge.smtp</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.smtp.auth.html">slimta.edge.smtp.auth</a>
	</li>

	<li>
		<a href="../modules/slimta.hmac.html">slimta.hmac</a>
	</li>

	<li>
		<a href="../modules/slimta.message.html">slimta.message</a>
	</li>

	<li>
		<a href="../modules/slimta.message.bounce.html">slimta.message.bounce</a>
	</li>

	<li>
		<a href="../modules/slimta.message.client.html">slimta.message.client</a>
	</li>

	<li>
		<a href="../modules/slimta.message.contents.html">slimta.message.contents</a>
	</li>

	<li>
		<a href="../modules/slimta.message.envelope.html">slimta.message.envelope</a>
	</li>

	<li>
		<a href="../modules/slimta.message.response.html">slimta.message.response</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_date_header.html">slimta.policies.add_date_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_message_id_header.html">slimta.policies.add_message_id_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_received_header.html">slimta.policies.add_received_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.forward.html">slimta.policies.forward</a>
	</li>

	<li>
		<a href="../modules/slimta.queue.html">slimta.queue</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.html">slimta.relay</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.maildrop.html">slimta.relay.maildrop</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.smtp.html">slimta.relay.smtp</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.mx.html">slimta.routing.mx</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.static.html">slimta.routing.static</a>
	</li>

	<li>
		<a href="../modules/slimta.signalfd.html">slimta.signalfd</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.html">slimta.storage</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.session.html">slimta.storage.session</a>
	</li>

	<li>
		<a href="../modules/slimta.uuid.html">slimta.uuid</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.html">slimta.xml</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.reader.html">slimta.xml.reader</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.writer.html">slimta.xml.writer</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>slimta.bus.proxy</code></h1>

<p>Module that provides a convenient way to apply policies and make changes to a stream of requests traversing a bus. For example, a message going from the queue to the relayer may not yet have any routing information in order to be relayed.</p>





<h2>Functions</h2>
<table class="function_list">

    <tr>
    <td class="name" nowrap><a href="#slimta.bus.proxy.__call">slimta.bus.proxy.__call</a>&nbsp;(self)</td>
    <td class="summary">Enters an infinite loop of accepting new requests and starting new threads to proxy them.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.bus.proxy.accept">slimta.bus.proxy.accept</a>&nbsp;(self)</td>
    <td class="summary">Waits for a new request on the source bus.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.bus.proxy.new">slimta.bus.proxy.new</a>&nbsp;(from_bus, to_bus, filter)</td>
    <td class="summary">Creates a new proxy object between a source and destination bus.</td>
    </tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="slimta.bus.proxy.__call"></a><strong>slimta.bus.proxy.__call</strong>&nbsp;(self)</dt>
<dd>
Enters an infinite loop of accepting new requests and starting new threads to proxy them. This metamethod is given as a convenience so that a proxy object can be called as a new thread.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the proxy object.
	</li>
	
</ul>






<h3>Return value:</h3>
this function never returns and should be called in its own thread.



</dd>




<dt><a name="slimta.bus.proxy.accept"></a><strong>slimta.bus.proxy.accept</strong>&nbsp;(self)</dt>
<dd>
Waits for a new request on the source bus. When one is received, a callable object is returned that will run the proxy object's filter function. Usually the application will call the returned value in a new thread so that it may keep calling accept() for new requests.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the proxy object.
	</li>
	
</ul>






<h3>Return value:</h3>
a callable object to filter and proxy the received request.



</dd>




<dt><a name="slimta.bus.proxy.new"></a><strong>slimta.bus.proxy.new</strong>&nbsp;(from_bus, to_bus, filter)</dt>
<dd>
Creates a new proxy object between a source and destination bus.


<h3>Parameters</h3>
<ul>
	
	<li>
	  from_bus: requests are received from this bus as the source.
	</li>
	
	<li>
	  to_bus: passed to the filter as the destination bus to proxy requests to.
	</li>
	
	<li>
	  filter: optional function to filter requests and proxy them to the destination bus. Accepts two parameters, the destination bus object and the request array. It should return an appropriate response array that will be sent back to the source bus. The default filter simply proxies to the destination without modification.
	</li>
	
</ul>






<h3>Return value:</h3>
a new proxy object.



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
    <p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
