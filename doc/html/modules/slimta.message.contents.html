<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>slimta.message.contents: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
    <!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
    <div id="product_logo"></div>
    <div id="product_name"><big><b></b></big></div>
    <div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/slimta.html">slimta</a>
	</li>

	<li>
		<a href="../modules/slimta.base64.html">slimta.base64</a>
	</li>

	<li>
		<a href="../modules/slimta.bus.html">slimta.bus</a>
	</li>

	<li>
		<a href="../modules/slimta.bus.proxy.html">slimta.bus.proxy</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.http.html">slimta.edge.http</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.smtp.html">slimta.edge.smtp</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.smtp.auth.html">slimta.edge.smtp.auth</a>
	</li>

	<li>
		<a href="../modules/slimta.hmac.html">slimta.hmac</a>
	</li>

	<li>
		<a href="../modules/slimta.message.html">slimta.message</a>
	</li>

	<li>
		<a href="../modules/slimta.message.bounce.html">slimta.message.bounce</a>
	</li>

	<li>
		<a href="../modules/slimta.message.client.html">slimta.message.client</a>
	</li>

	<li><strong>slimta.message.contents</strong></li>
	
	<li>
		<a href="../modules/slimta.message.envelope.html">slimta.message.envelope</a>
	</li>

	<li>
		<a href="../modules/slimta.message.response.html">slimta.message.response</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_date_header.html">slimta.policies.add_date_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_message_id_header.html">slimta.policies.add_message_id_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_received_header.html">slimta.policies.add_received_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.forward.html">slimta.policies.forward</a>
	</li>

	<li>
		<a href="../modules/slimta.queue.html">slimta.queue</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.html">slimta.relay</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.maildrop.html">slimta.relay.maildrop</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.smtp.html">slimta.relay.smtp</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.mx.html">slimta.routing.mx</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.static.html">slimta.routing.static</a>
	</li>

	<li>
		<a href="../modules/slimta.signalfd.html">slimta.signalfd</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.html">slimta.storage</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.session.html">slimta.storage.session</a>
	</li>

	<li>
		<a href="../modules/slimta.uuid.html">slimta.uuid</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.html">slimta.xml</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.reader.html">slimta.xml.reader</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.writer.html">slimta.xml.writer</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>slimta.message.contents</code></h1>

<p>Module used to parse, store, load, and stringify message contents in an easy, sensible way. This includes header parsing and modification.</p>





<h2>Functions</h2>
<table class="function_list">

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.__tostring">slimta.message.contents.__tostring</a>&nbsp;(self)</td>
    <td class="summary">Converts the message contents object into a raw string, headers included.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.add_header">slimta.message.contents.add_header</a>&nbsp;(self, name, value, after_existing)</td>
    <td class="summary">Adds a new header to the message.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.copy">slimta.message.contents.copy</a>&nbsp;(old)</td>
    <td class="summary">Copies a message contents object into a new object.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.delete_header">slimta.message.contents.delete_header</a>&nbsp;(self, name)</td>
    <td class="summary">Removes ALL headers of the given name from the message.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.from_meta">slimta.message.contents.from_meta</a>&nbsp;(meta, raw_contents)</td>
    <td class="summary">Loads a message contents object from the given simple table of meta information.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.from_xml">slimta.message.contents.from_xml</a>&nbsp;(tree_node, attachments)</td>
    <td class="summary">Loads a message contents object from the given XML node tree, as generated by the slimta.xml.reader module.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.new">slimta.message.contents.new</a>&nbsp;(raw_data)</td>
    <td class="summary">Creates a new message contents object from the given information.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.to_meta">slimta.message.contents.to_meta</a>&nbsp;(self, meta)</td>
    <td class="summary">Creates a simple key-value table describing all the information contained in the message contents object, suitable for serialization or, more commonly, storage in a storage engine.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.message.contents.to_xml">slimta.message.contents.to_xml</a>&nbsp;(self, attachments)</td>
    <td class="summary">Generates a table array of XML representing the message contents object.</td>
    </tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="slimta.message.contents.__tostring"></a><strong>slimta.message.contents.__tostring</strong>&nbsp;(self)</dt>
<dd>
Converts the message contents object into a raw string, headers included.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the message contents object.
	</li>
	
</ul>








</dd>




<dt><a name="slimta.message.contents.add_header"></a><strong>slimta.message.contents.add_header</strong>&nbsp;(self, name, value, after_existing)</dt>
<dd>
Adds a new header to the message. This is the ONLY way to add new headers to a message, modifying the "headers" table will NOT work.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the message contents object.
	</li>
	
	<li>
	  name: the name of the header to add, e.g. "X-Awesome-Sauce".
	</li>
	
	<li>
	  value: the raw contents of the header, e.g. "127.0.0.1".
	</li>
	
	<li>
	  after_existing: if true, append the new header instead of prepending it to the list of headers.
	</li>
	
</ul>








</dd>




<dt><a name="slimta.message.contents.copy"></a><strong>slimta.message.contents.copy</strong>&nbsp;(old)</dt>
<dd>
Copies a message contents object into a new object. This is a "deep" copy operation, tables are not recycled.


<h3>Parameters</h3>
<ul>
	
	<li>
	  old: the original message contents object.
	</li>
	
</ul>






<h3>Return value:</h3>
a new message contents object, identical to the original.



</dd>




<dt><a name="slimta.message.contents.delete_header"></a><strong>slimta.message.contents.delete_header</strong>&nbsp;(self, name)</dt>
<dd>
Removes ALL headers of the given name from the message. This is the ONLY way to remove headers from a message, modifying the "headers" table will NOT work.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the message contents object.
	</li>
	
	<li>
	  name: the name of the header to remove, case insensitive.
	</li>
	
</ul>








</dd>




<dt><a name="slimta.message.contents.from_meta"></a><strong>slimta.message.contents.from_meta</strong>&nbsp;(meta, raw_contents)</dt>
<dd>
Loads a message contents object from the given simple table of meta information. Because message contents are stored separately from message meta information, this function does not actually use the meta table, it is only given for consistency.


<h3>Parameters</h3>
<ul>
	
	<li>
	  meta: simple table of meta information to load from.
	</li>
	
	<li>
	  raw_contents: raw message data.
	</li>
	
</ul>






<h3>Return value:</h3>
a new message contents object.



</dd>




<dt><a name="slimta.message.contents.from_xml"></a><strong>slimta.message.contents.from_xml</strong>&nbsp;(tree_node, attachments)</dt>
<dd>
Loads a message contents object from the given XML node tree, as generated by the slimta.xml.reader module.


<h3>Parameters</h3>
<ul>
	
	<li>
	  tree_node: node of the XML tree where the message contents starts.
	</li>
	
	<li>
	  attachments: table of attachments with raw message data.
	</li>
	
</ul>






<h3>Return value:</h3>
a new message contents object.



<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/slimta.xml.reader.html">
		slimta.xml.reader
	</a>
	
</ul>

</dd>




<dt><a name="slimta.message.contents.new"></a><strong>slimta.message.contents.new</strong>&nbsp;(raw_data)</dt>
<dd>
Creates a new message contents object from the given information. The headers are accessible from the resulting message object in the "headers" field. For example, to get the first "From" header, use <code>contents.headers.from[1]</code>, which will return nil if no such header exists.


<h3>Parameters</h3>
<ul>
	
	<li>
	  raw_data: raw message contents, such as that read from an SMTP stream or from a storage engine.
	</li>
	
</ul>






<h3>Return value:</h3>
a new message contents object.



</dd>




<dt><a name="slimta.message.contents.to_meta"></a><strong>slimta.message.contents.to_meta</strong>&nbsp;(self, meta)</dt>
<dd>
Creates a simple key-value table describing all the information contained in the message contents object, suitable for serialization or, more commonly, storage in a storage engine. Because message contents are stored separately from message meta information, this function is likely a no-op.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the message contents object.
	</li>
	
	<li>
	  meta: if given, keys are added to this table rather than a new one.
	</li>
	
</ul>






<h3>Return value:</h3>
the simple table of meta information.



</dd>




<dt><a name="slimta.message.contents.to_xml"></a><strong>slimta.message.contents.to_xml</strong>&nbsp;(self, attachments)</dt>
<dd>
Generates a table array of XML representing the message contents object. The message contents are actually written to the XML body as an index reference to a field in the attachments table where the raw data is written.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the message contents object.
	</li>
	
	<li>
	  attachments: table of attachments for raw message data.
	</li>
	
</ul>






<h3>Return value:</h3>
a table array of XML lines.



<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/slimta.xml.writer.html">
		slimta.xml.writer
	</a>
	
</ul>

</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
    <p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
