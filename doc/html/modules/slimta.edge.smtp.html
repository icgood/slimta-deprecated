<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>slimta.edge.smtp: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
    <!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
    <div id="product_logo"></div>
    <div id="product_name"><big><b></b></big></div>
    <div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/slimta.html">slimta</a>
	</li>

	<li>
		<a href="../modules/slimta.base64.html">slimta.base64</a>
	</li>

	<li>
		<a href="../modules/slimta.bus.html">slimta.bus</a>
	</li>

	<li>
		<a href="../modules/slimta.bus.proxy.html">slimta.bus.proxy</a>
	</li>

	<li>
		<a href="../modules/slimta.edge.http.html">slimta.edge.http</a>
	</li>

	<li><strong>slimta.edge.smtp</strong></li>
	
	<li>
		<a href="../modules/slimta.edge.smtp.auth.html">slimta.edge.smtp.auth</a>
	</li>

	<li>
		<a href="../modules/slimta.hmac.html">slimta.hmac</a>
	</li>

	<li>
		<a href="../modules/slimta.message.html">slimta.message</a>
	</li>

	<li>
		<a href="../modules/slimta.message.bounce.html">slimta.message.bounce</a>
	</li>

	<li>
		<a href="../modules/slimta.message.client.html">slimta.message.client</a>
	</li>

	<li>
		<a href="../modules/slimta.message.contents.html">slimta.message.contents</a>
	</li>

	<li>
		<a href="../modules/slimta.message.envelope.html">slimta.message.envelope</a>
	</li>

	<li>
		<a href="../modules/slimta.message.response.html">slimta.message.response</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_date_header.html">slimta.policies.add_date_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_message_id_header.html">slimta.policies.add_message_id_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.add_received_header.html">slimta.policies.add_received_header</a>
	</li>

	<li>
		<a href="../modules/slimta.policies.forward.html">slimta.policies.forward</a>
	</li>

	<li>
		<a href="../modules/slimta.queue.html">slimta.queue</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.html">slimta.relay</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.maildrop.html">slimta.relay.maildrop</a>
	</li>

	<li>
		<a href="../modules/slimta.relay.smtp.html">slimta.relay.smtp</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.mx.html">slimta.routing.mx</a>
	</li>

	<li>
		<a href="../modules/slimta.routing.static.html">slimta.routing.static</a>
	</li>

	<li>
		<a href="../modules/slimta.signalfd.html">slimta.signalfd</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.html">slimta.storage</a>
	</li>

	<li>
		<a href="../modules/slimta.storage.session.html">slimta.storage.session</a>
	</li>

	<li>
		<a href="../modules/slimta.uuid.html">slimta.uuid</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.html">slimta.xml</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.reader.html">slimta.xml.reader</a>
	</li>

	<li>
		<a href="../modules/slimta.xml.writer.html">slimta.xml.writer</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>slimta.edge.smtp</code></h1>

<p>Module that manages an edge listener for SMTP message requests.</p>





<h2>Functions</h2>
<table class="function_list">

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.accept">slimta.edge.smtp.accept</a>&nbsp;(self)</td>
    <td class="summary">Waits for a new socket connection.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.close">slimta.edge.smtp.close</a>&nbsp;(self)</td>
    <td class="summary">Closes the SMTP edge listener socket.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.enable_authentication">slimta.edge.smtp.enable_authentication</a>&nbsp;(self, auth, the, a)</td>
    <td class="summary">Enables the authentication extension for the SMTP server.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.enable_tls">slimta.edge.smtp.enable_tls</a>&nbsp;(self, context, immediately)</td>
    <td class="summary">Turns on TLS support in the SMTP server using the given context.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.new">slimta.edge.smtp.new</a>&nbsp;(socket, bus)</td>
    <td class="summary">Creates a new SMTP edge listener.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.set_banner_message">slimta.edge.smtp.set_banner_message</a>&nbsp;(self, code, message)</td>
    <td class="summary">Sets the code and message first received by clients when they connect to the SMTP listener.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.set_max_message_size">slimta.edge.smtp.set_max_message_size</a>&nbsp;(self, size)</td>
    <td class="summary">Instantiates a policy that the SMTP server will not accept messages over the size limit, and that clients may announce the message size before sending.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#slimta.edge.smtp.set_validator">slimta.edge.smtp.set_validator</a>&nbsp;(self, command, func)</td>
    <td class="summary">Sets a validator function for an SMTP command.</td>
    </tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="slimta.edge.smtp.accept"></a><strong>slimta.edge.smtp.accept</strong>&nbsp;(self)</dt>
<dd>
Waits for a new socket connection.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
</ul>






<h3>Return value:</h3>
a callable object that handles the entire connection transaction and sends the message as a request to the bus. Usually, this is called in a new thread so that accept() can be called again immediately.



</dd>




<dt><a name="slimta.edge.smtp.close"></a><strong>slimta.edge.smtp.close</strong>&nbsp;(self)</dt>
<dd>
Closes the SMTP edge listener socket.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
</ul>








</dd>




<dt><a name="slimta.edge.smtp.enable_authentication"></a><strong>slimta.edge.smtp.enable_authentication</strong>&nbsp;(self, auth, the, a)</dt>
<dd>
Enables the authentication extension for the SMTP server. Once a session has been authenticated, the "authed" key will be true in the session argument passed to validators.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: 
	</li>
	
	<li>
	  auth: 
	</li>
	
	<li>
	  the: smtp edge object.
	</li>
	
	<li>
	  a: slimta.edge.smtp.auth object for managing authentication.
	</li>
	
</ul>








<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/slimta.edge.smtp.auth.html">
		slimta.edge.smtp.auth
	</a>
	
</ul>

</dd>




<dt><a name="slimta.edge.smtp.enable_tls"></a><strong>slimta.edge.smtp.enable_tls</strong>&nbsp;(self, context, immediately)</dt>
<dd>
Turns on TLS support in the SMTP server using the given context. This is implemented using the STARTTLS extension of ESMTP described in RFC 2487.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
	<li>
	  context: the ratchet.ssl context object.
	</li>
	
	<li>
	  immediately: if true, expect clients to encrypt the entire session immediately rather than using STARTTLS. This is usually done on port 465 rather than 25, but was made obsolete by STARTTLS.
	</li>
	
</ul>








<h3>See also:</h3>
<ul>
	
	<li><a href="">
		<a href="http://ratchet.icgood.net/api/latest/modules/ratchet.ssl.html">ratchet.ssl</a>
	</a>
	
</ul>

</dd>




<dt><a name="slimta.edge.smtp.new"></a><strong>slimta.edge.smtp.new</strong>&nbsp;(socket, bus)</dt>
<dd>
Creates a new SMTP edge listener. The socket should already be opened in listening mode, and the bus is used to send received messages as requests.


<h3>Parameters</h3>
<ul>
	
	<li>
	  socket: listening socket.
	</li>
	
	<li>
	  bus: bus to send requests on.
	</li>
	
</ul>






<h3>Return value:</h3>
a new smtp edge object.



</dd>




<dt><a name="slimta.edge.smtp.set_banner_message"></a><strong>slimta.edge.smtp.set_banner_message</strong>&nbsp;(self, code, message)</dt>
<dd>
Sets the code and message first received by clients when they connect to the SMTP listener. Currently, this banner is static and cannot react dynamically to the IP of the connecting client.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
	<li>
	  code: the SMTP reply code to send with the banner, usually "220".
	</li>
	
	<li>
	  message: the banner message. This message should start with the server's hostname and the string "ESMTP", e.g. "slimta.org ESMTP Mail Gateway".
	</li>
	
</ul>








</dd>




<dt><a name="slimta.edge.smtp.set_max_message_size"></a><strong>slimta.edge.smtp.set_max_message_size</strong>&nbsp;(self, size)</dt>
<dd>
Instantiates a policy that the SMTP server will not accept messages over the size limit, and that clients may announce the message size before sending. This uses the SIZE extension of ESMTP described in RFC 1870.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
	<li>
	  size: the maximum allowed message size.
	</li>
	
</ul>








</dd>




<dt><a name="slimta.edge.smtp.set_validator"></a><strong>slimta.edge.smtp.set_validator</strong>&nbsp;(self, command, func)</dt>
<dd>
Sets a validator function for an SMTP command. This allows for policies that happen before receipt of message data, e.g. rejecting an address in the RCPT command. Please see the examples and usage manual for information on how to effectively use these.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the smtp edge object.
	</li>
	
	<li>
	  command: the simple command name, e.g. "MAIL" or "RCPT".
	</li>
	
	<li>
	  func: the function to validate with. This function is passed a session table, reply table, and anything extra on a per-command basis, such as a recipient address or EHLO string.
	</li>
	
</ul>








</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
    <p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
